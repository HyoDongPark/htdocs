<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--JQuery를 사용하기 위해 가지고온 링크-->
    <script src="../board/node_modules/jquery/dist/jquery.js"></script>
    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="../board/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="../board/node_modules/bootstrap/dist/css/bootstrap-theme.min.css">
    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="../board/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
</head>
<body onload="Checked()">
<nav class="nav navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#"><font color="orange">空白のパージ</font></a>
        </div>
        <ul class="nav navbar-nav">
            <li><a href="#">リスト</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="#"><span class="glyphicon glyphicon-user"></span>会員加入</a></li>
            <li id="loginValue"><a id="login" data-target="#modalLogin" data-toggle="modal"><span class="glyphicon glyphicon-log-in"></span>ログイン</a></li>
            <li id="logoutValue" style="display:none;"><a id="logout" onclick="logout()"><span class="glyphicon glyphicon-log-out"></span>ログアウト</a></li>
        </ul>
    </div>
</nav>
<br><br>
<div class="container">
    <select class="form-control">
        <option value="제목" name="title">タイトル</option>
        <option value="내용" name="contents">コンテンツ</option>
        <option value="작성자" name="writer">ライター</option>
    </select>
    <input type="text" id="search" name="search" class="form-control" style="display: inline">
    <button onclick="" class="form-control btn-success">サーチ</button>
</div>
<br>
<div class="container">
    <table class="table table-bordered" style="text-align: center">
        <thead>
            <tr>
                <td>ナンバー</td>
                <td>タイトル</td>
                <td>ライター</td>
                <td>ツデー</td>
                <td>クリック　数</td>
            </tr>
        </thead>
    </table>
    <br>
    <a id="write" hidden data-target="#modalLogin" data-toggle="modal" class="btn-success">글쓰기</a>
</div>

<div class="modal fade" id="modalLogin">
    <div class="container">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" data-dismiss="modal">x</button>
                    <!--ID 창-->
                    <h4 class="modal-title">アイディー</h4>
                    <br>
                    <input class="form-control" type="text" id="idCheck" name="idCheck">
                </div>
                <div class="modal-body">
                    <h4 class="modal-title">パスワード</h4>
                    <br>
                    <input class="form-control" type="text" id="pwCheck" name="pwCheck">
                </div>
                <div class="modal-footer">
                    <button class="btn-success" id="loginOk" onclick="login()">ログイン</button>
                    <button class="btn-danger" name="close" data-dismiss="modal">アウト</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    var value = 1;

    function Checked() {
        $.ajax({
            type: "POST",
            url: "login/loginCheck.php",
            data: {sessionCheck: value}
        }).done(function (data) {
            if(data == "OK") {
                $("#loginValue").hide();
                $("#logoutValue").show();
                $("#write").show();
            }
            if(data == "NO") {
                $("#loginValue").show();
                $("#logoutValue").hide();
                $("#write").hide();
            }
        });
    }


    function login() {
        var getId = $("#idCheck").val();
        var getPw = $("#pwCheck").val();

        if (getId == null || getPw == null) {
            alert("아이디와 비밀번호를 덜 입력하셨습니다.");
        }
        else {
            $.ajax({
                type: "POST",
                url: "login/loginCheck.php",
                data: {idCheck: getId, pwCheck: getPw}
            }).done(function (data) {
                if(data == "") {
                    $("#modalLogin").modal('hide');
                    $("#loginValue").hide();
                    $("#logoutValue").show();
                    $("#write").show();
                }
                else
                    alert(data);
            });
        }
    }
    function logout() {
        value = 1;

        $.ajax({
            type: "POST",
            url: "login/loginCheck.php",
            data: {sessionClear: value}
        }).done(function (data) {
            if(data == "OK") {
                $("#loginValue").show();
                $("#logoutValue").hide();
                $("#write").hide();
            }
            if(data == "NO") {
                $("#loginValue").hide();
                $("#logoutValue").show();
                $("#write").show();
            }
        });
    }
</script>
</body>
</html>